<!DOCTYPE html>
<html>
    <head>
        <title>Test Cart</title>
    </head>
    <body>
        
        <table>
            <th>商品</th>
            <th>單價</th>
            <th>操作</th>

            <tr>
                <td>aaa</td>
                <td>10</td>
                <td><input type="button" value="ADD" onclick="addtoCart(this)"></td>
            </tr>
            <tr>
                <td>bbb</td>
                <td>20</td>
                <td><input type="button" value="ADD" onclick="addtoCart(this)"></td>
            </tr>
        </table>

        <h1>剁手手</h1>
        <table>
            <thead>
            <th>商品</th>
            <th>單價</th>
            <th>數量</th>
            <th>金額</th>
            <th>操作</th>
            </thead>
            
            <tbody id="goods">
            </tbody>

            <tfoot>
                <td>總計</td>
                <td id= "total"></td>
                <td>元</td>
            </tfoot>
            
        </table>

        <script>
            function addtoCart(btn){
                var tr=btn.parentNode.parentNode;
                var tds = tr.getElementsByTagName("td");
                var name = tds[0].innerHTML;
                var price= tds[1].innerHTML;
                var tbody = document.getElementById("goods");
                var row = tbody.insertRow();
                row.innerHTML=
                    "<td>"+name+"</td>"+
                    "<td>"+price+"</td>"+
                    "<td>"+
                    "<input type='button' value='-' id='jian' onclick='change(this,-1)' />"+
                    "<input type='text' value='1' id='jian' onclick='change(this)' />"+
                    "<input type='button' value='+' id='jia' onclick='change(this,+1)' />"+
                    "</td>"+
                    "<td>"+price+"</td>"
                    "<td>"+"<input type= 'button' value='X' onclick='del(this>'/>"
                    total();
            }

            function change (btn,n){
                var inputs = btn.parentNode.getElementsByTagName("input");
                var amount = parseInt(inputs[1].value);
                inputs[1].value=amount+n;
                amount=inputs[1].value;
                var tr= btn.parentNode.parentNode;
                var tds= tr.getElementsByTagName("td")

                var price= parseInt (tds[1].innerHTML);
                var sumtotal =price *amount;
                tds[3].innerHTML =sumtotal;
                total();

            }

            function total(){
                var tbody= document.getElementById("goods");
                var trs = tbody.getElementsByTagName("tr");
                var sum = 0;
                for(var i =0;i<trs.length;i++){
                    var tds=trs[i].getElementsByTagName("td")
                    var sumtotal= tds[3].innerHTML;
                    sum=sum+parseInt(sumtotal);
                }
                var total = document.getElementById("total");
                total.innerHTML=sum;
            }
           
        </script>
        
    </body>
</html>